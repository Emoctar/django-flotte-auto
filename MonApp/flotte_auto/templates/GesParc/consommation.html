{% extends 'GesParc/home_GesParc.html' %}
{% load static %}

{% block content %}
  <div class="container">
    <h2>Recherche de consommation de carburant</h2>
    <form method="post" id="searchForm">
      {% csrf_token %}
      <div class="row mb-3">
        <div class="col-md-4">
          <label for="start_date" class="form-label">Date de début :</label>
          <input type="date" class="form-control" id="start_date" name="start_date" required>
        </div>
        <div class="col-md-4">
          <label for="end_date" class="form-label">Date de fin :</label>
          <input type="date" class="form-control" id="end_date" name="end_date" required>
        </div>
        <div class="col-md-4">
          <label for="vehicle" class="form-label">Véhicule :</label>
          <select class="form-select" id="vehicle" name="vehicle">
            {% for v in vehicles %}
              <option value="{{ v.id }}">{{ v.marque }} - {{ v.modele }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Rechercher</button>
    </form>

    <!-- Résultats de recherche -->
    <div id="searchResults" class="mt-4">
      {% if start_date and end_date and vehicle and consumption_rate %}
        <h4>Résultats de la recherche :</h4>
        <p>Date de début : {{ start_date }}</p>
        <p>Date de fin : {{ end_date }}</p>
        <p>Véhicule : {{ vehicle.marque }} - {{ vehicle.modele }}</p>
        <p>Taux de consommation : {{ consumption_rate }}</p>
      {% endif %}
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#searchForm').submit(function(event) {
        event.preventDefault();
        alert('Formulaire de recherche soumis !');
        // Ajoutez d'autres actions ou manipulations de formulaire ici
      });
    });
  </script>
{% endblock %}
